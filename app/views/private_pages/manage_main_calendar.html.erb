<div>
	<h2>P채채kalenteri</h2>
	<h3>Vuosi <span id="year"><%= @year %></span> viikko <span id="week"><%= @today.cweek %></span></h3>
	
	<br />
	<br />
	
	<h3>Asetukset</h3>
	<div>
		<table class="table">
			<tbody>
				<tr>
					<th>N채yt채 kalenteri joukkueelle</th>
					<td>
						<select>
							<option></option>
							<option>A-juniorit</option>
							<option>B-juniorit</option>
							<option>C2 -98</option>
						</select>
					</td>
				</tr>
				<tr>
					<th>Valitse joukkue jolle tunnit varataan</th>
					<td>
						<select>
							<option></option>
							<option>A-juniorit</option>
							<option>B-juniorit</option>
							<option>C2 -98</option>
						</select>
					</td>
				</tr>
			</tbody>
		</table>
		
		<a class="btn btn-large pull-right" href="#">Tallenna varaukset</a>
	</div>
	
	<br />
	<br />
	<br />
	<br />
	
	<div>
		<a class="btn btn-medium pull-left" onclick="prev();"><i class="icon-arrow-left"></i> Edellinen viikko</a>
		<a class="btn btn-medium center-button" onclick="curr();">Nykyinen</a>
		<a class="btn btn-medium pull-right" onclick="next();">Seuraava viikko <i class="icon-arrow-right"></i></a>
	</div>
	
	<br />
	<br />
	
	<div id="main-cal-wrapper">
		<table id="main-calendar-table">
			<thead>
				<tr>
					<th>Klo / pvm</th>
					<th>Ma <%= @date_strs.first %></th>
					<th>Ti <%= @date_strs[1] %> </th>
					<th>Ke <%= @date_strs[2] %></th>
					<th>To <%= @date_strs[3] %></th>
					<th>Pe <%= @date_strs[4] %></th>
					<th>La <%= @date_strs[5] %></th>
					<th>Su <%= @date_strs[6] %></th>
				</tr>
			</thead>
			<tbody>
				<% (9..21).each do |i| %>
					<tr>
						<th><%= i %>:00</th>
						<% @date_strs.each do |date| %>
							<td class="reservable" date-data="<%= date %>" select="false" time="<%= i %>:00">kvak</td>	
						<% end %>
					</tr>
					<tr>
						<th><%= i %>:30</th>
						<% @date_strs.each do |date| %>
							<td class="reservable" date-data="<%= date %>" select="false" time="<%= i %>:30">kvak</td>	
						<% end %>
					</tr>
				<% end %>
			</tbody>
		</table>
		
		<% render :partial => "main_cal_table", :locals => {:date_strs => @date_strs} %>
	</div>
</div>

<script>
	$(document).ready(function () {
		$(".reservable").click(function () {
			if ($(this).css("background-color") == "rgb(0, 128, 0)") {
				$(this).css("background-color", "grey");
				$(this).attr("select", "false");
			} else {
				$(this).css("background-color", "green");
				$(this).attr("select", "true");
			}
		});
	});

	function next() {
		var diff = <%= @diff %> + 1;
		window.location = "/paakalenterin_hallinta?diff=" + diff; 	
	}
			
	function prev() {
		var diff = <%= @diff %> - 1;
		window.location = "/paakalenterin_hallinta?diff=" + diff;
	}
	
	function curr() {
		window.location = "/paakalenterin_hallinta?diff=0";
	}
</script>
